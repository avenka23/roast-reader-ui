<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlotBurn | Satirical Movie Roasts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;900&display=swap"
        rel="stylesheet">
    <style>
        body {
            background-color: #050505;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(255, 77, 0, 0.04) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 77, 0, 0.03) 0%, transparent 30%);
            font-family: 'Inter', system-ui, sans-serif;
            color: #e5e5e5;
            line-height: 1.6;
        }

        .burn-font {
            font-family: 'Bebas Neue', cursive;
            letter-spacing: 0.04em;
            font-style: italic;
            text-transform: uppercase;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #ff4d00;
        }

        .glass {
            background: rgba(20, 20, 25, 0.75);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 77, 0, 0.12);
        }

        img {
            display: block;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            transform: translate3d(0, 0, 0);
        }

        .card-hover {
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1), border-color 0.3s, filter 0.3s;
            will-change: transform;
            background: #0f0f14;
        }

        .card-hover:hover {
            transform: translateY(-8px);
            border-color: rgba(255, 77, 0, 0.5);
            filter: drop-shadow(0 10px 25px rgba(255, 77, 0, 0.2));
        }

        .modal-blur {
            backdrop-filter: blur(12px);
            background: rgba(0, 0, 0, 0.88);
        }

        .chip {
            font-family: 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', monospace;
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }
    </style>
</head>

<body class="min-h-screen antialiased pb-24">
    <header class="sticky top-0 z-40 border-b border-zinc-900 bg-black/85 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex flex-col items-center md:items-start">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-black burn-font tracking-tight cursor-pointer"
                    onclick="showHome()">
                    PLOT<span class="text-[#ff4d00]">BURN</span>
                </h1>
                <p class="text-xs sm:text-sm text-zinc-400 uppercase tracking-widest mt-1.5 font-mono">Roasting
                    cinematic chaos â€” with love</p>
            </div>

            <div id="nav-controls" class="flex items-center gap-4 w-full md:w-auto">
                <div class="relative flex-1 md:w-80">
                    <input type="text" id="searchBar" onkeyup="filterMovies()" placeholder="Search epic fails..."
                        class="w-full bg-zinc-900/60 border border-zinc-700 rounded-full px-5 py-2.5 text-sm focus:outline-none focus:border-[#ff4d00] focus:ring-1 focus:ring-[#ff4d00]/40 transition-all font-mono">
                </div>
                <button onclick="showAbout()"
                    class="text-sm font-bold text-zinc-300 hover:text-[#ff4d00] transition-colors uppercase tracking-wider whitespace-nowrap burn-font">
                    About
                </button>
            </div>
        </div>
    </header>

    <main id="home-view" class="max-w-7xl mx-auto px-4 sm:px-6 py-10">
        <div class="text-center sm:text-left mb-6">
            <p class="text-xs text-zinc-500 uppercase tracking-widest font-mono">Hottest disasters first</p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5 sm:gap-7 lg:gap-8"
            id="movies-grid"></div>
    </main>

    <div id="about-view" class="hidden max-w-4xl mx-auto px-4 sm:px-6 py-12 sm:py-16 relative">
        <div class="glass rounded-3xl p-6 sm:p-10 lg:p-12 border border-zinc-700/50 relative">
            <button onclick="showHome()"
                class="absolute top-4 right-4 text-3xl text-zinc-400 hover:text-[#ff4d00] z-50 bg-black/50 rounded-full w-10 h-10 flex items-center justify-center transition-colors shadow-lg">Ã—</button>
            <h2 class="text-5xl sm:text-6xl lg:text-7xl burn-font text-[#ff4d00] mb-3">PLOTBURN</h2>
            <div class="space-y-6 text-zinc-200 text-lg">
                <p>PlotBurn is your friendly neighborhood roast pit for movies. We donâ€™t hate films â€” weâ€™re just
                    obsessed with how gloriously unhinged they can get.</p>
                <p class="small-text text-zinc-400 font-mono">This is satire. Filmmakers are artists; we're just here
                    clowning on the results with respect and zero malice.</p>
            </div>
            <button onclick="showHome()"
                class="mt-10 w-full bg-[#ff4d00] hover:bg-[#ff6600] text-black font-black text-lg py-4 rounded-xl uppercase tracking-widest transition-all burn-font shadow-lg">Back
                to the Roasts ðŸ”¥</button>
        </div>
    </div>

    <div id="burn-modal"
        class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-blur overflow-hidden"
        onclick="handleBackdropClick(event)">
        <div class="glass w-full max-w-4xl rounded-2xl sm:rounded-3xl shadow-2xl relative flex flex-col md:flex-row max-h-[90vh] overflow-hidden border border-zinc-700"
            onclick="event.stopPropagation()">
            <button onclick="closeModal()"
                class="absolute top-4 right-4 text-3xl text-zinc-400 hover:text-[#ff4d00] z-50 bg-black/50 rounded-full w-10 h-10 flex items-center justify-center transition-colors shadow-md">Ã—</button>
            <div
                class="w-full md:w-5/12 h-56 sm:h-72 md:h-auto flex-shrink-0 bg-black border-b md:border-b-0 md:border-r border-zinc-700/50">
                <img id="modal-poster" src="" class="w-full h-full object-cover" loading="lazy">
            </div>
            <div
                class="p-5 sm:p-8 md:p-10 w-full md:w-7/12 overflow-y-auto custom-scrollbar flex flex-col bg-zinc-900/40">
                <div class="mb-5">
                    <span id="modal-label"
                        class="inline-block bg-[#ff4d00] text-black text-xs sm:text-sm font-black px-3 py-1 rounded-sm uppercase tracking-wider mb-2 font-mono"></span>
                    <h2 id="modal-headline"
                        class="text-3xl sm:text-4xl md:text-5xl burn-font leading-tight uppercase text-white"></h2>
                </div>
                <div class="grid grid-cols-2 gap-4 mb-7">
                    <div class="bg-zinc-800/40 p-4 rounded-lg border border-zinc-700/40">
                        <h4 class="text-xs font-bold text-zinc-500 uppercase tracking-widest mb-1 font-mono">Internet
                            Says</h4>
                        <div class="flex items-baseline gap-2">
                            <span id="modal-pulse-score" class="text-4xl font-black font-mono"></span>
                            <span class="text-sm text-zinc-600 font-mono">/10</span>
                        </div>
                    </div>
                </div>
                <div class="mb-6">
                    <h4 class="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 font-mono">The Logic</h4>
                    <p id="modal-roast-overview"
                        class="text-sm text-zinc-300 leading-relaxed bg-zinc-800/25 p-4 rounded-lg border border-zinc-700/40">
                    </p>
                </div>
                <div class="mb-8">
                    <h4 class="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3 font-mono">The Roast</h4>
                    <p id="modal-roast-text"
                        class="text-xl sm:text-2xl text-zinc-100 leading-relaxed italic border-l-4 border-[#ff4d00] pl-5 sm:pl-6">
                    </p>
                </div>
                <div id="modal-chips" class="flex flex-wrap gap-2 mb-8 border-b border-zinc-700/50 pb-8"></div>
                <div class="bg-black/40 p-5 rounded-lg border border-zinc-700 mb-6 font-mono">
                    <h4 class="text-xs font-bold text-zinc-500 uppercase mb-3 tracking-wider">Similar Disasters</h4>
                    <ul id="modal-similar" class="text-sm space-y-2.5 text-zinc-300 italic"></ul>
                </div>
                <div
                    class="mt-auto pt-6 border-t border-zinc-700 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 text-xs font-mono text-zinc-500">
                    <span id="modal-truth" class="meta-text font-mono">DATA_SRC: OPEN_WEB</span>
                    <span id="modal-generated" class="meta-text font-mono"></span>
                </div>
                <button id="share-btn" onclick="copyCaption()"
                    class="mt-6 w-full bg-[#ff4d00] hover:bg-[#ff6600] text-black font-black text-lg py-4 rounded-xl uppercase tracking-widest transition-all burn-font shadow-md">
                    Spread the Burn ðŸ”¥
                </button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script>
        function getScoreColor(bars) {
            if (bars >= 7) return 'emerald-400';
            if (bars >= 5) return 'yellow-400';
            return 'red-400';
        }

        // Updated Navigation Logic
        function showHome() {
            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('about-view').classList.add('hidden');
            document.getElementById('nav-controls').classList.remove('hidden');
        }

        function showAbout() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('about-view').classList.remove('hidden');
            document.getElementById('nav-controls').classList.add('hidden');
        }

        function renderFeed(filterData = items) {
            const container = document.getElementById('movies-grid');
            container.innerHTML = '';
            filterData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = "group glass rounded-2xl sm:rounded-3xl overflow-hidden cursor-pointer card-hover flex flex-col h-full border border-zinc-800/50";

                const originalIndex = items.indexOf(item);
                card.onclick = () => openModal(originalIndex);

                const backdrop = item.movie.backdrop_path
                    ? `https://image.tmdb.org/t/p/w780${item.movie.backdrop_path}`
                    : `https://image.tmdb.org/t/p/w780${item.movie.poster_path}`;

                const bars = item.roast?.reception?.bars ?? 0;
                const scoreColor = getScoreColor(bars);

                card.innerHTML = `
                    <div class="relative aspect-[16/9] sm:aspect-[16/10] overflow-hidden bg-black">
                        <img src="${backdrop}" loading="lazy" class="w-full h-full object-cover grayscale-[0.35] group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500">
                        <div class="absolute inset-x-0 bottom-[-2px] h-2/3 bg-gradient-to-t from-[#0f0f14] via-[#0f0f14]/80 to-transparent"></div>
                        <div class="absolute bottom-3 left-3 flex flex-col gap-1 z-10">
                            <span class="text-[10px] font-bold text-white/40 uppercase tracking-widest font-mono">Internet Says</span>
                            <span class="bg-black/75 backdrop-blur-sm text-${scoreColor} text-sm font-black px-2.5 py-1 rounded border border-white/10 inline-flex items-center gap-2 font-mono">
                                <span class="w-1.5 h-1.5 rounded-full bg-${scoreColor} animate-pulse"></span>
                                ${bars}/10
                            </span>
                        </div>
                    </div>
                    <div class="p-6 flex-grow flex flex-col bg-[#0f0f14] relative z-10">
                        <div class="border-l-2 border-[#ff4d00]/30 pl-3 mb-3">
                            <p class="text-sm font-bold text-zinc-300 uppercase tracking-wider font-mono line-clamp-2">${item.movie.title}</p>
                        </div>
                        
                        <h3 class="text-2xl burn-font font-black leading-[1.1] uppercase mb-5 text-zinc-100 group-hover:text-[#ff4d00] transition-colors line-clamp-3">
                            ${item.roast.headline}
                        </h3>
                        
                        <div class="flex flex-wrap gap-2 mt-auto">
                            ${(item.roast.chips || []).slice(0, 3).map(chip => `
                                <span class="chip bg-white/5 text-zinc-300 px-3 py-1.5 rounded border border-white/10 text-[11px] font-bold">#${chip.replace(/\s+/g, '')}</span>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function filterMovies() {
            const query = document.getElementById('searchBar').value.toLowerCase().trim();
            if (!query) return renderFeed();
            const filtered = items.filter(item =>
                item.movie.title.toLowerCase().includes(query) ||
                item.roast.headline.toLowerCase().includes(query)
            );
            renderFeed(filtered);
        }

        function openModal(index) {
            const item = items[index];
            if (!item) return;

            const bars = item.roast?.reception?.bars ?? 0;
            const scoreColorClass = getScoreColor(bars);

            document.getElementById('modal-poster').src = `https://image.tmdb.org/t/p/w780${item.movie.poster_path}`;
            document.getElementById('modal-label').innerText = item.roast.reception.label;
            document.getElementById('modal-headline').innerText = item.roast.headline;

            const pulseScore = document.getElementById('modal-pulse-score');
            pulseScore.innerText = bars;
            pulseScore.className = `text-4xl font-black font-mono text-${scoreColorClass}`;

            document.getElementById('modal-roast-overview').innerText = item.roast.overview;
            document.getElementById('modal-roast-text').innerText = item.roast.roast;
            document.getElementById('modal-generated').innerText = item.generated_at ? new Date(item.generated_at).toLocaleDateString() : '';

            document.getElementById('modal-chips').innerHTML = (item.roast.chips || []).map(c =>
                `<span class="chip bg-white/5 text-zinc-300 px-3 py-1.5 rounded border border-white/10 text-[12px] font-bold">#${c.replace(/\s+/g, '')}</span>`
            ).join('');

            document.getElementById('modal-similar').innerHTML = (item.roast.similar_movies || []).map(m =>
                `<li class="flex items-start gap-2.5 font-mono"><span class="text-[#ff4d00]">>></span> ${m}</li>`
            ).join('');

            window.currentCaption = item.roast.shareable_caption;
            document.getElementById('burn-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('burn-modal').classList.add('hidden');
            document.body.style.overflow = '';
        }

        function handleBackdropClick(e) { if (e.target.id === 'burn-modal') closeModal(); }

        function copyCaption() {
            if (window.currentCaption) {
                navigator.clipboard.writeText(window.currentCaption);
                const btn = document.getElementById('share-btn');
                btn.innerText = 'COPIED ðŸ”¥';
                setTimeout(() => btn.innerText = 'Spread the Burn ðŸ”¥', 1800);
            }
        }

        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
        items.sort((a, b) => b.movie.popularity - a.movie.popularity);
        renderFeed();
    </script>
</body>

</html>